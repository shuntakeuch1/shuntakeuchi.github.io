<!doctype html> <html lang=ja> <head> <meta content="IE=edge" http-equiv=X-UA-Compatible> <meta charset=utf-8> <meta name=description content="沖縄出身,都内で働くプログラマ,Webプログラマ,RubyOnRails,Elixir,Emacs,CakePHP,Infrastracture as Code,Middleman,React.js,jQuery"> <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name=viewport> <link href="/images/ts_favicon.ico" rel=icon type="image/ico" sizes=16x16 /> <link href="/images/ts_favicon.ico" rel=icon type="image/ico" sizes=32x32 /> <link href="/images/ts_favicon.ico" rel=icon type="image/ico" sizes=96x96 /> <title>デザインパターン入門</title> <link async href='//fonts.googleapis.com/css?family=Lato:300,400' rel=stylesheet> <script async src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> <link href="/assets/css/bootstrap.min-6527d8bf.css" rel=stylesheet async=async /> <link href="/assets/css/common-718e01b1.css" rel=stylesheet async=async /> <link href="/assets/css/myblog-custom-b7a513fd.css" rel=stylesheet /> <script src="/assets/js/bootstrap.min-430a443d.js" async=async></script> <script>
         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
             (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                                  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

         ga('create', 'UA-90340725-1', 'auto');
         ga('send', 'pageview');

        </script> </head> <body class="x2017 x2017_11 x2017_11_24 x2017_11_24_design-pattern x2017_11_24_design-pattern_index"> <nav class="navbar navbar-default navbar-fixed-top"> <div class="container container-fluid"> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=".site-menu"> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href="/">shuntakeuch1のBlog</a> </div> <div class="collapse navbar-collapse site-menu" role=navigation> <ul class="nav navbar-nav navbar-right"> <li><a href="#">Home</a></li> </ul> </div> </div> </nav> <header class=jumbotron> <div class=container> <h1>Life is a journey</h1> </div> </header> <div id=wrap> <div class="container main-content"> <div class=row> <div class="col-ms-offset-2 col-md-9 content-area"> <h1 class=ori-title>デザインパターン入門 <small>2017/11/24</small> </h1> <p>Java本格入門にデザインパターンの章があったので、勉強のために気になった言葉とサンプルコードを実装してみた。<br/> プログラムも組むとなると、時間がかかりますが理解度が深まり私の中で昇華された気分になるので。</p> <h3 id=section>デザインパターンとは</h3> <p>クラス構造のベストプラクティスで有名なデザインパターンとして23種類の「Gofデザインパターン」がある。<br/> 23種類のGofデザインパターンは下記の3種類に分類される。</p> <ul> <li>オブジェクトの「生成」に関するパターン</li> <li>プログラムの「構造」に関するパターン</li> <li>オブジェクトの「振る舞い」に関するパターン</li> </ul> <h3 id=section-1>デザインパターンを利用するメリット</h3> <ol> <li>再利用性が高い、柔軟な設計ができる。</li> <li>意思疎通が容易になる。</li> </ol> <h3 id=section-2>生成に関するパターン</h3> <ul> <li>AbstaractFactory 関連する一覧のインスタンスを状況に応じて適切に生成する方法を提供する。</li> <li>Builder 複合化されたインスタンスの生成過程を隠蔽する。</li> <li>Singleton あるクラスについてインスタンスが単一であることを保証する。</li> </ul> <blockquote> <p>AbstaractFactoryパターン</p> </blockquote> <p>インスタンスの生成を専門に行うクラス(Factory)を用意することで<br/> 整合性を保つ必要のある関連するインスタンス群をまちがいなく生成するためのパターンです。<br/> 現場のプログラムではフレームワークを作成する際に利用することが多いパターンです。 環境や条件によって処理パターンを切り替えて実行するしくみを実現する際にフレームワークの利用者が、 具体的な処理の中身を意識することなく透過的に呼び出すことができるのが利点です。</p> <p>サンプルは「設定ファイルに記載されたシステムの環境情報によってDBMSを切り替えて利用する」プログラム。</p> <blockquote> <p>Builderパターン</p> </blockquote> <p>複雑な生成過程が必要となるインスタンスについてその生産過程を隠蔽することにより、 同じ過程で異なる内部形式のインスタンスを得るパターンです。</p> <blockquote> <p>Singletonパターン</p> </blockquote> <p>システム内で常に同一のインスタンスを使いまわしたい場合に利用できます。 このパターンを応用すると「システム内で常に2つのみのインスタンスしか存在しないクラスを作る」と いったことも容易にできます。現場のプログラムではシステム内で一意に情報を保持したい場合に用いるパターンです。 ただし、Singletonパターンを利用する場合は複数の処理が同時にインスタンスを操作しても整合性を損なうことがないよう、 インスタンスへの多重アクセスを想定した排他処理をおこなうことを考慮する必要があります。</p> <h3 id=section-3>構造に関するパターン</h3> <ul> <li>Adapter インターフェースに互換性のないクラス同士を組み合わせる</li> <li>Composite 再帰的な構造の取扱いを容易にする。</li> </ul> <blockquote> <p>Adapterパターン</p> </blockquote> <p>インターフェースに互換性のないクラスどうしを組み合わせることを目的とし、 既存のシステムと新しいシステムのインターフェースの違いを吸収するAdapterを 用意することで少ない変更で既存のシステムを新しいシステムに適用できるようにします。 Adapterパターンは利用したいインターフェースを強制的に変えたい場合に利用できます。 現場のプログラムでは既に存在するクラスを変更することなく、別のインターフェースで呼び出す場合に利用できます。 あまり推奨されることではありませんがフレームワークを利用している際に「フレームワーク内部の処理をどうしても別の方法で呼びたい」 といった場合にも利用できる。</p> <blockquote> <p>Compositeパターン</p> </blockquote> <p>Compositeパターンを用いることで再帰的な構造の記述が容易になり、メンテナンス性も向上させることができます。 現場のプログラムではツリー構造のデータを表現する際に利用します。</p> <h3 id=section-4>振る舞いに関するパターン</h3> <ul> <li>Command 「命令」をインスタンスとして扱うことにより、処理の組合せなどを容易にする。</li> <li>Strategy 戦略を簡単に切り替えられる仕組みを提供する。</li> <li>Iterator 保有するインスタンスの各要素に順番にアクセスする方法を提供する。</li> <li>Observer あるインスタンスの状態が変化した際に、そのインスタンス自身が状態の変化を通知するしくみを提供する。</li> </ul> <blockquote> <p>Commandパターン</p> </blockquote> <p>「命令」自体をインスタンスとして扱うことにより処理の組合せなどを容易にするパターンです。 Commandの共通インターフェースと、処理の呼び出しをフレームワーク側で実装し、フレームワークの利用者にCommand クラスを継承した具体的な処理パターンを実装してもらうという使い方が有効。</p> <blockquote> <p>Strategyパターン</p> </blockquote> <p>処理アルゴリズムを簡単に切り替えられるようにするパターンで、 条件によって処理のアルゴリズムだけを切り替えて実行したい場合に有効です。 Commandパターンと似ているようにみえるかもしれませんが、Commandパターンが「命令」そのものをオブジェクト化し、 処理対象を内部に保存しているのに対してStrategyパターンは「アルゴリズム」をオブジェクト化しているところが違いになります。 Strategyパターンを用いることで複数のアルゴリズムを切り替えて利用する場合に見通しの良いコードを書くことができるようになります。</p> <blockquote> <p>Iteratorパターン</p> </blockquote> <p>複数のインスタンスを保有する場合に、各要素に順番にアクセスする方法を提供するパターンです。</p> <blockquote> <p>Observerパターン</p> </blockquote> <p>あるインスタンスの状態が変化したことを観察し、そのインスタンス自身が状態の変化を通知するしくみを提供するパターンです。 Observerパターンを用いることで、インスタンスの状態の変更に応じて 直接呼び出し関係を持たないクラスに「通知」をおこない、処理を呼び出すことが可能になります。</p> <h3 id=section-5>まとめ</h3> <p>とりあえず実装してみたのでサンプルコードは<a href="https://github.com/shuntakeuch1/design-pattern-sample">こちら</a><br/> 今回はJavaで実装してみましたがオブジェクト指向全般に応用できるテクニックなので<br/> 無駄がなく、今後の品質の高い設計を行うための参考にできれば。</p> <div class="col-md-12 panel panel-default" style="margin:50px 0px;"> <div id=disqus_thread></div> <script>
//<![CDATA[
                  var disqus_shortname = 'takeblog-1';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script> <noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript> <a href='http://disqus.com' class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a> </div> </div> <div class="col-md-3 sidebar"> <div class="panel panel-default"> <div class=panel-heading> <h5 class=panel-title>Profile</h5> </div> <div class=panel-body> <img src="//www.gravatar.com/avatar/8131bf6bc92dac792c8cd06a19c095b0?s=200&amp;d=" width=200 height=200 class="avatar img-responsive img-responsive-overwrite" alt="8131bf6bc92dac792c8cd06a19c095b0?s=200&amp;d="/> <i class="fa fa-github-square fa-2x" aria-hidden=true></i> <a target=_blank href="https://twitter.com/shuntakeuch1"> <i class="fa fa-twitter-square fa-2x" aria-hidden=true></i> </a> <a target=_blank href="https://www.facebook.com/shun.takeuchi1"> <i class="fa fa-facebook-square fa-2x" aria-hidden=true></i> </a> <div class=profile-body> 沖縄出身</br> 都内で働くプログラマ</br> 沖縄時間(うちなータイム)の使い手<br> </div> </div> </div> <div class=list-group> <li class="list-group-item active">カテゴリ</li> <li class=list-group-item> <a href="/categories/linux/"> Linux <span class="badge pull-right">1</span> </a> </li> <li class=list-group-item> <a href="/categories/emacs/"> Emacs <span class="badge pull-right">1</span> </a> </li> <li class=list-group-item> <a href="/categories/勉強会/"> 勉強会 <span class="badge pull-right">1</span> </a> </li> <li class=list-group-item> <a href="/categories/mysql/"> mysql <span class="badge pull-right">1</span> </a> </li> <li class=list-group-item> <a href="/categories/php/"> PHP <span class="badge pull-right">2</span> </a> </li> <li class=list-group-item> <a href="/categories/git/"> git <span class="badge pull-right">1</span> </a> </li> <li class=list-group-item> <a href="/categories/ruby-on-rails/"> Ruby on Rails <span class="badge pull-right">1</span> </a> </li> <li class=list-group-item> <a href="/categories/効率化/"> 効率化 <span class="badge pull-right">1</span> </a> </li> <li class=list-group-item> <a href="/categories/cms/"> CMS <span class="badge pull-right">1</span> </a> </li> </div> <div class=list-group> <li class="list-group-item active">シリーズ</li> <li class=list-group-item> <a href="/series/markdown記法備忘録/"> Markdown記法備忘録 <span class="badge pull-right">1</span> </a> </li> <li class=list-group-item> <a href="/series/middleman4/"> Middleman4 <span class="badge pull-right">1</span> </a> </li> </div> </div> </div> </div> </div> <div id=footer> <div class=container> <p>&copy; 2016-2017 <a href="https://github.com/shuntakeuchi"> shuntakeuchi</a></p> </div> </div> </body> </html>